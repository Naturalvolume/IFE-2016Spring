# 视图更新方式
### vue
**数据**：vue组件内部提供了一个值为函数的`data`属性，调用这个函数时会返回一个对象，以此来保证**每个实例可以维护一份对返回对象的独立复制**。

vue采取响应式的视图更新方式，基于`Object.defineProperty()`函数，监听数据对象属性的变化，然后再更新视图。

### react
**数据模型**：react组件的数据模型`state`是**对象模型**，通过将`state`设置为不可变对象的方式实现，不可变对象指的就是当一个变量被创建后，它的值不可以被修改。意味着当组件状态发生变化时，不修改`state`属性，而是重新创建新的`state`状态对象。

**数据对象**：react中的不可变对象通过**数据共享**的操作，减少性能开销。原理就是若对象中的一个属性发生变化，那么只深拷贝当前属性，然后将对象属性指向这个深拷贝的属性，其它节点仍然共享。

**数据更新**：react不像vue可以自动响应，需要手动调用`setState()`函数触发。react为了提升组件更新时的性能，不仅将状态更新包装成任务放到了异步队列，还使用了类似**协程**的方式来调度这些队列中的更新任务。任务的执行顺序会根据每个任务的优先级来进行调整，并且任务的执行过程中可能会被中断，但状态会被保存，直到合适的时候会再次读取状态并继续执行任务。

在组件内部调用`setState()`修改状态时将异步更新视图，而在原生dom事件或异步操作中（比如`setTimeout`、`setInterval`、`Promise`）则是同步更新视图。