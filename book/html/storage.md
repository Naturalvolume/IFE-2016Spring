# 客户端存储
客户端存储遵循“同源策略”，因此**不同站点的页面是无法互相读取对方存储的数据**，而**同一站点的不同页面之间可以互相共享存储数据**。

### web存储
web存储的API包含`localStorage`对象和`sessionStorage`对象，易于使用
支持大容量数据存储同时兼容目前所有主流浏览器，但不兼容早期浏览器。

- 浏览器仅支持存储字符串类型数据，若想要存储和获取其他类型数据，需要自己手动进行编码和解码

```javascript
// 1. 存储数字时，会自动把它转换成一个字符串
// 所以获取数字的时候，要手动将其转换成数字类型
localStorage.x = 10
var x = parseInt(localStorage.x)

// 2. 存储一个日期类型数据的时候先进行编码，获取的时候进行解码
localStorage.lastRead = (new Date()).toUTCString()
var lastRead = new Date(Date.parse(localStorage.lastRead))

// 3. 使用json使对基本数据类型编码工作变得方便
localStorage.data = JSON.stringify(data)    // 编码后存储
var data = JSON.parse(localStorage.data)
```

- 存储有效期不同：`localStorage`是永久性存储，`sessionStorage`在窗口关闭后数据都被删除了
> 现代浏览器已具备重新打开最近关闭的标签页并恢复上一次浏览的会话功能，因此这些标签页以及与之相关的`sessionStorage`有效期可能会更加长些。
- 作用域不同：`localStorage`只能在同样的浏览器 及 同源文档间共享，`sessionStorage`的作用域被限定在窗口中（若一个浏览器标签页包含两个`<iframe>`元素，它们所包含的文档是同源的，那么它们之间可以共享`sessionStorage`）
- 存储事件：当数据发生改变时，浏览器会在其他对数据可见的窗口对象上触发存储事件（在数据改变的窗口上反而不会触发）
> 注意只有当存储数据真正发生改变的时候才会触发存储事件，所以给已存在的存储项设置一个一摸一样的值，或是删除一个本来就不存在的存储项都是不会触发存储事件的。

### cookie
cookie 是早期的客户端存储机制，是针对服务器端脚本设计使用的，所有新旧浏览器都支持它。
- cookie 用于保存状态及为web浏览器提供身份识别机制，但是cookie不采用任何加密机制，因此它们不安全
- 修改cookie只能通过**以字符串形式读写**`Document`对象的`cookie`属性完成
- 有效期：默认有效期只在web浏览器会话期间，一旦用户关闭浏览爱，cookie保存的数据就丢失了；若要设置有效期，可通过设置`max-age`属性，然后浏览器会将cookie数据存储在文件中，直到过了指定的有效期才会删除该文件。
- 作用域：通过文档源`domain`和文档路径`path`确定。
- 局限性：浏览器不能保存超过300个cookie，为每个服务器保存的cookie不能超过20个（对整个服务器而言），每个cookie保存的数据不能超过4KB（即名字和值的总量不能超过4KB）

### IE User Data
IE 专属的客户端存储机制，可实现一定量的字符串数据存储。

### 应用程序存储和离线web应用

### web数据库
让开发者像使用数据库那样操作大量数据，客户端数据库API都是**异步的**，都使用了**事件处理机制**。

### 文件系统API
让web应用可以使用类似基于文件的存储机制。